# Meower

Meower is a Go boilerplate that moves the logic of your web application to an internal gRPC server. Along with some other tools, it provides a solid foundation for building web applications.

## Features

- [x] **Fiber** - HTTP web framework
- [x] **Protocol Buffers** - Interface definition language, to define the data structure and services
- [x] **gRPC** - High-performance RPC framework, where the web app logic lives
- [x] **PostgreSQL** - Relational database
- [x] **SQLC** - Generate type safe Go from SQL queries and schema
- [x] **Docker** - To containerize the application
- [x] **Docker Compose** - Run every services with a single command, reloading the server when required
- [x] **GitHub Actions** - CI/CD pipeline
- [x] **Templ** - Generate HTML using templates in Go, with hot browser reload
- [x] **Fly.io** - Global edge platform for applications
- [x] **Tailwind CSS** - Utility-first CSS framework
- [x] **gRPC UI** - gRPC Web implementation for testing gRPC servers
- [x] **Mailpit** - Local webmail client to receive emails from your app
- [x] **pgWeb** - Web-based database browser for PostgreSQL

## Structure

```
.
├── api
│   ├── gen # Generated protobuf and gRPC files
│   │   └── meower
│   │       └── v1
│   └── protobuf # Protobuf files defining the data structure and methods
│       └── meower
│           └── v1
├── cmd # Main functions to start the servers
│   ├── api
│   └── web
├── internal
│   ├── db # Database queries and schema definition
│   └── pkg
│       ├── client # gRPC client
│       ├── handlers # gRPC server handlers
│       │   └── meower
│       │       └── v1
│       └── web # Web app
│           ├── handlers # Web app handlers, calling the gRPC server
│           ├── static # Static files, for CSS generated by Tailwind, images, etc...
│           │   ├── public
│           │   │   └── css
│           │   └── src
│           │       └── css
│           └── ui # HTML templates, using templ
│               ├── components # Reusable components
│               │   ├── global
│               │   └── headers
│               ├── layouts # Layouts for the pages
│               ├── pages # Specific pages
│               │   ├── custom_errors
│               │   └── homepage
│               └── services # UI for a specific service
│                   └── meows
│                       └── v1
├── node_modules
└── scripts
```

## Purpose

This framework helps you to clearly set where everything should lives.

- **protobuf**: Define the data structure and methods, including their input/output
- **sqlc**: Define the SQL queries and schema, generating type safe Go code that you can use
- **gRPC implementation**: Implement the methods defined in the protobuf file. Your logic will lives here. It gives you the freedom to expose the generated files to the public, or the gRPC endpoint. Your app will consume it internally. The DB connection will only be created here.
- **web app**: The web app will consume the gRPC server, and will be responsible for the web interface. It will also serve the static files, and the generated HTML, using templ.

When a web request is made, the web app will call the gRPC server, which will handle the logic and the database connection. The web app will only be responsible for the web interface.

user => web app => gRPC server => database

This separation of concerns will make your application more maintainable, scalable, and testable. You can more easily change some pieces of the stack without affecting the others.

The latency overhead of interally using gRPC is minimal. You can scale the web app and the gRPC server independently, and even use different languages for each.

This boilerplate is only an example of a stack I like to use, but it's far more flexible than that. You can use it as a base for your own stack, changing the tools and the structure as you see fit.

## Getting Started

### Prerequisites

- [Docker](https://docs.docker.com/get-docker/)

### Installation

```bash
git clone github.com/AlyxPink/meower
cd meower
```

The generated templ and sqlc files are gitignored, so you need to generate them first:

```bash
docker compose run -v $(pwd):/src/ --no-deps --tty --rm web templ generate
```

Then you can start the application along with every service:

```bash
docker compose up
```

You can now access the various services:

- Web app: [http://localhost:7331](http://localhost:7331)
- gRPC UI: [http://localhost:50050](http://localhost:50050)
- Mailpit: [http://localhost:8025](http://localhost:8025)
- pgWeb: [http://localhost:5430](http://localhost:5430)

Feel free to open the web app and create a "Meow" to see the application in action. You can create and list them.
